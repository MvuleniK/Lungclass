{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\n\n/**\n * @license\n * Copyright 2017 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport var Dilation2DProgram = _createClass(function Dilation2DProgram(convInfo) {\n  _classCallCheck(this, Dilation2DProgram);\n\n  this.variableNames = ['x', 'W'];\n  this.outputShape = convInfo.outShape;\n  var inHeight = convInfo.inHeight,\n      inWidth = convInfo.inWidth,\n      padInfo = convInfo.padInfo,\n      strideHeight = convInfo.strideHeight,\n      strideWidth = convInfo.strideWidth,\n      filterHeight = convInfo.filterHeight,\n      filterWidth = convInfo.filterWidth,\n      dilationHeight = convInfo.dilationHeight,\n      dilationWidth = convInfo.dilationWidth;\n  var padTop = padInfo.top,\n      padLeft = padInfo.left;\n  this.userCode = \"\\n      const ivec2 strides = ivec2(\" + strideHeight + \", \" + strideWidth + \");\\n      const ivec2 pads = ivec2(\" + padTop + \", \" + padLeft + \");\\n      const float neg_infinity = -3.4e38;\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int d1 = coords.w;\\n        ivec2 outTopLeftCorner =\\n            coords.yz * strides - pads;\\n        int hBeg = outTopLeftCorner.x;\\n        int wBeg = outTopLeftCorner.y;\\n\\n        float curVal = neg_infinity;\\n        for (int h = 0; h < \" + filterHeight + \"; h++) {\\n          int hIn = hBeg + h * \" + dilationHeight + \";\\n\\n          if (hIn >= 0 && hIn < \" + inHeight + \") {\\n            for (int w = 0; w < \" + filterWidth + \"; w++) {\\n              int wIn = wBeg + w * \" + dilationWidth + \";\\n\\n              if (wIn >= 0 && wIn < \" + inWidth + \") {\\n                float xVal = getX(batch, hIn, wIn, d1);\\n                float wVal = getW(h, w, d1);\\n\\n                float val = xVal + wVal;\\n                if (val > curVal) {\\n                  curVal = val;\\n                }\\n              }\\n            }\\n          }\\n        }\\n\\n        float result = curVal;\\n        setOutput(result);\\n      }\\n    \";\n});","map":{"version":3,"sources":["../src/dilation_gpu.ts"],"names":[],"mappings":";;;AAAA;;;;;;;;;;;;;;;AAeG;AAKH,WAAa,iBAAb,gBAKE,2BAAY,QAAZ,EAA6C;EAAA;;EAJ7C,KAAA,aAAA,GAAgB,CAAC,GAAD,EAAM,GAAN,CAAhB;EAKE,KAAK,WAAL,GAAmB,QAAQ,CAAC,QAA5B;EAEA,IACE,QADF,GAUI,QAVJ,CACE,QADF;EAAA,IAEE,OAFF,GAUI,QAVJ,CAEE,OAFF;EAAA,IAGE,OAHF,GAUI,QAVJ,CAGE,OAHF;EAAA,IAIE,YAJF,GAUI,QAVJ,CAIE,YAJF;EAAA,IAKE,WALF,GAUI,QAVJ,CAKE,WALF;EAAA,IAME,YANF,GAUI,QAVJ,CAME,YANF;EAAA,IAOE,WAPF,GAUI,QAVJ,CAOE,WAPF;EAAA,IAQE,cARF,GAUI,QAVJ,CAQE,cARF;EAAA,IASE,aATF,GAUI,QAVJ,CASE,aATF;EAYA,IAAY,MAAZ,GAAqC,OAArC,CAAO,GAAP;EAAA,IAA0B,OAA1B,GAAqC,OAArC,CAAoB,IAApB;EAEA,KAAK,QAAL,4CACgC,YADhC,UACiD,WADjD,2CAE6B,MAF7B,UAEwC,OAFxC,mZAe0B,YAf1B,iDAgB6B,cAhB7B,6CAkB8B,QAlB9B,6CAmB8B,WAnB9B,qDAoBiC,aApBjC,iDAsBkC,OAtBlC;AAuCD,CA7DH","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport class Dilation2DProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'W'];\n        this.outputShape = convInfo.outShape;\n        const { inHeight, inWidth, padInfo, strideHeight, strideWidth, filterHeight, filterWidth, dilationHeight, dilationWidth } = convInfo;\n        const { top: padTop, left: padLeft } = padInfo;\n        this.userCode = `\n      const ivec2 strides = ivec2(${strideHeight}, ${strideWidth});\n      const ivec2 pads = ivec2(${padTop}, ${padLeft});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${filterHeight}; h++) {\n          int hIn = hBeg + h * ${dilationHeight};\n\n          if (hIn >= 0 && hIn < ${inHeight}) {\n            for (int w = 0; w < ${filterWidth}; w++) {\n              int wIn = wBeg + w * ${dilationWidth};\n\n              if (wIn >= 0 && wIn < ${inWidth}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `;\n    }\n}\n//# sourceMappingURL=dilation_gpu.js.map"]},"metadata":{},"sourceType":"module"}