{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var ResourceManager = function () {\n  function ResourceManager() {\n    var hashTableNameToHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var hashTableMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ResourceManager);\n\n    this.hashTableNameToHandle = hashTableNameToHandle;\n    this.hashTableMap = hashTableMap;\n  }\n\n  _createClass(ResourceManager, [{\n    key: \"addHashTable\",\n    value: function addHashTable(name, hashTable) {\n      this.hashTableNameToHandle[name] = hashTable.handle;\n      this.hashTableMap[hashTable.id] = hashTable;\n    }\n  }, {\n    key: \"getHashTableHandleByName\",\n    value: function getHashTableHandleByName(name) {\n      return this.hashTableNameToHandle[name];\n    }\n  }, {\n    key: \"getHashTableById\",\n    value: function getHashTableById(id) {\n      return this.hashTableMap[id];\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      for (var key in this.hashTableMap) {\n        this.hashTableMap[key].clearAndClose();\n        delete this.hashTableMap[key];\n      }\n\n      for (var name in this.hashTableNameToHandle) {\n        this.hashTableNameToHandle[name].dispose();\n        delete this.hashTableNameToHandle[name];\n      }\n    }\n  }]);\n\n  return ResourceManager;\n}();","map":{"version":3,"sources":["../../src/executor/resource_manager.ts"],"names":[],"mappings":";;AAsBA,WAAa,eAAb;EACE,2BAE4C;IAAA,IAD/B,qBAC+B,uEADS,EACT;IAAA,IAA/B,YAA+B,uEAAF,EAAE;;IAAA;;IAD/B,KAAA,qBAAA,GAAA,qBAAA;IACA,KAAA,YAAA,GAAA,YAAA;EAAmC;;EAHlD;IAAA;IAAA,OAcE,sBAAa,IAAb,EAA2B,SAA3B,EAA+C;MAC7C,KAAK,qBAAL,CAA2B,IAA3B,IAAmC,SAAS,CAAC,MAA7C;MACA,KAAK,YAAL,CAAkB,SAAS,CAAC,EAA5B,IAAkC,SAAlC;IACD;EAjBH;IAAA;IAAA,OAwBE,kCAAyB,IAAzB,EAAqC;MACnC,OAAO,KAAK,qBAAL,CAA2B,IAA3B,CAAP;IACD;EA1BH;IAAA;IAAA,OAgCE,0BAAiB,EAAjB,EAA2B;MACzB,OAAO,KAAK,YAAL,CAAkB,EAAlB,CAAP;IACD;EAlCH;IAAA;IAAA,OAuCE,mBAAO;MACL,KAAK,IAAM,GAAX,IAAkB,KAAK,YAAvB,EAAqC;QACnC,KAAK,YAAL,CAAkB,GAAlB,EAAuB,aAAvB;QACA,OAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP;MACD;;MAED,KAAK,IAAM,IAAX,IAAmB,KAAK,qBAAxB,EAA+C;QAC7C,KAAK,qBAAL,CAA2B,IAA3B,EAAiC,OAAjC;QACA,OAAO,KAAK,qBAAL,CAA2B,IAA3B,CAAP;MACD;IACF;EAjDH;;EAAA;AAAA","sourceRoot":"","sourcesContent":["/**\n * Contains global resources of a model.\n */\nexport class ResourceManager {\n    constructor(hashTableNameToHandle = {}, hashTableMap = {}) {\n        this.hashTableNameToHandle = hashTableNameToHandle;\n        this.hashTableMap = hashTableMap;\n    }\n    /**\n     * Register a `HashTable` in the resource manager.\n     *\n     * The `HashTable` can be retrieved by `resourceManager.getHashTableById`,\n     * where id is the table handle tensor's id.\n     *\n     * @param name Op node name that creates the `HashTable`.\n     * @param hashTable The `HashTable` to be added to resource manager.\n     */\n    addHashTable(name, hashTable) {\n        this.hashTableNameToHandle[name] = hashTable.handle;\n        this.hashTableMap[hashTable.id] = hashTable;\n    }\n    /**\n     * Get the table handle by node name.\n     * @param name Op node name that creates the `HashTable`. This name is also\n     *     used in the inputs list of lookup and import `HashTable` ops.\n     */\n    getHashTableHandleByName(name) {\n        return this.hashTableNameToHandle[name];\n    }\n    /**\n     * Get the actual `HashTable` by its handle tensor's id.\n     * @param id The id of the handle tensor.\n     */\n    getHashTableById(id) {\n        return this.hashTableMap[id];\n    }\n    /**\n     * Dispose `ResourceManager`, including its hashTables and tensors in them.\n     */\n    dispose() {\n        for (const key in this.hashTableMap) {\n            this.hashTableMap[key].clearAndClose();\n            delete this.hashTableMap[key];\n        }\n        for (const name in this.hashTableNameToHandle) {\n            this.hashTableNameToHandle[name].dispose();\n            delete this.hashTableNameToHandle[name];\n        }\n    }\n}\n//# sourceMappingURL=resource_manager.js.map"]},"metadata":{},"sourceType":"module"}